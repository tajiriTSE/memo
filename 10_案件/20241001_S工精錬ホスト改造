

-------------------------------------------------------
■
Nexusインストーラがある

Nexus送信する機能
UDP通信を行う、誰でも受け取れる、通信相手を特定しない
受け取ったがわが

PLC内にNexus　サードパーティ
受け取る側がNexusのイベントがあがる
TCD、識別番号みたいなイメージ、
UDP、受け口を増やすだけで、送信側を変える必要はない

VBAでTCDを送る、Nexusの仕組みを使っている
受け取るのは計量実績監視ソフト、Nexusを使っている
通信はNEXUS間でやる

TCDナンバーテキスト、番号と構造体の名前、構造体の定義
.hテキスト、こういう情報で来るよ

受信する側からソースコードを解析して、送る定義

Nexusの受信側、レシーバーのexeが番号を見て弾くかどうか判断する
Nexusとしては飛んでいるデータを見る、捕まえるだけ

S工、タイヤの材料を練るところ

飛ばして受け取る、というのは1台でもできる




-------------------------------------------------------
■S工　基本設計、お客様打ち合わせ

MachineControllerというアプリケーションが仲介している、
Nexusを受信するアプリケーションが別途存在する、中村様に後ほどお送り頂く

環境構築において、IPアドレスなどを設定する、現地のソースコードを送って頂いた
現地IPアドレス：166.51.1.21

Nexus受信アプリは、計量値チェックプログラムと同じPCに配置する
設定類はそのままで動くはず
一回やってしまえば、今後はスムーズにいくのでは

Nexusの受信アプリと精錬ホストアプリを動かす
バッチアプリがある

StartBBHost.bat
└便利な起動バッチ


-------------------------------------------------------
お客様と問い合わせ内容打ち合わせ
①Get/Put
バッチファイルを実行するとエラーになってしまう

Nexusのエラー、GET/PUTは関係ない
データフィールド、本番は11で動いている、開発環境では15で起動してしまっている
→貰ったフォルダ内に11の設定などがあった
　15のファイルは消して試した

■Get/Put単体でも起動しない
→バッチを1行ずつ実行
initialが様子がおかしい、そのあとのstructでエラー
頂いたstructフォルダ内のファイルを配置して成功
1行ずつ実行して進めた
nxstat -t
nxport 11 -l
└ポートオープン
Nexusの起動まではできた

GetPutのexeを直接実行→エラーが出るようになった
file/xml/の下にある設定ファイルはいじっていない
Get 0x82000001と2がでる　その後に起動はする
Put 起動後にエラーログがでる

WindowsServer2012/2016
└TSE社内で試せるかどうか

■アプリの関連
GETがTCDを受信して、マシンコントローラにデータを渡す
→WeghningResultContoroler
応答をマシンコントローラに渡す、
マシンコントローラーがPUTに送信する

★★
単体で動かすのではなく、プログラムマネージャーが管理している
これを動かせば必要なアプリが動く
└送受信ではなく全体の管理

exeのコンパイルや、設定変更はしないほうが良い
PUTのエラーもPCの設定と思われる


②TcdnoはC:\直下にコピー・・・やり方はテキストに記載しているはず
受信できた
受信内容のCSVを確認できた


③EXCELマクロ
送信・受信共にOK。


・納品物
コンパイル後のexeではなく、前のソースコード（.vbファイルや、変更があれば設定ファイルなど）
入れ替えの手順は.vbファイル単位で入れ替える手順で良い














