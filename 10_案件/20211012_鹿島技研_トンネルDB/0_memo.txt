
松尾さんから引継ぎ

■概要
現場にいれている
問い合わせが良く来る

最初の開発はD2Pさん
次にシステム創造の宮沢さんが引き継いだ

シュウホウ　1週間のトンネルの状況をまとめたEXCELの資料を作るアプリ

断面の事を切羽　かんさつぼ
一日ごとにデータをDBやファイルに保存される
日曜に動いて1週間分の内容を出力した州法を出力した

右から左から、ときまっている　掘っていく向きによる

目的としては週報を自動的に出力するアプリ

■流れ
データの格納先はAWSのRDS
画像はS3　AWSのストレージのサービス

アプリは複数ある

設定アプリ
現場モード：詰め所で使うモード
技研モード：現場の人ではなく鹿島技研の担当の人がトンネル別の設定を確認する画面

AutoUpDownApp　自動DLUP　スターとアップにいる常駐アプリ
詰所＝トンネル工事の現場にある環境
CJ＝コンピュータージャンボ　機械が出力したデータ　トンネルを掘る
日々データ(ぼ
DLは詰所のPCにファイル類をダウンロードする
S3へアップロードする

鹿島技研のPC
TunnelDBClient
週報作成など
マスタ管理
トンネルの種類増やしたり

アプリは全てC#フォームアプリで出来ている

CJFいぇUploader　コンピュータジャンボのファイルをアップロード
AnalysisDataOutput
データ検索して、データを取得してファイルを出力する

RockTypeDictionary
がん種というものを登録する
切羽観察簿　は　詳細名称で出力される
それを集約するための機能？

SakkoけんそReportCreater
検索してファイルをDLして
TD（トンネルでぃぎんぐ）トンネルどこまで掘ったか　距離
excelファイルに出力する

Fuuka
ファイルに出力　DBから検索して

■ここからWebAPI
EC2、仮想環境
RDS？DBのクラウドサービス？

各種ツールとDBの間に立つためのAPIがいる
Windowsの他の4つのアプリは週報を作るためのアプリ

WeeklyReportStarter
週に一回　

Register
週報の元のデータがいろいろなテーブルにはいっている、ファイルにもアップロードされている
週報を作りたい1週間分のデータをまとめる
CSV、S3からDL、値の計算など

Manager
週報作成アプリを実行する
常に起動している
週報作成の実行管理テーブルがあり、そこにデータが登録されているかを見て
その状態によって、週報作成アプリを起動する

Creator
マネージャーから起動される
週報作成に必要なデータをDBから取得する
グラフの画像を作る、週報を作成する
最終的にS3へ週報をアップロード

■LINUX
可視化アプリ
webアプリ　ブラウザからアクセスすると
日本地図が出てきて、どこにトンネルがあるかなど
トンネルを選ぶとTD（または志保NO）毎にデータ見られる
TSE制作ではない

Rundeck
データローダーという測量データをデータベースへ取り込む
それを動かすためのジョブ管理ツール

dataloader
RUndeckにより呼ばれる
測量計測データ、CJデータは我々でどうこうできるデータではないから、
専用でそういった機能を持たせている？
最終的にはDBへ登録される
CJデータファイルをAutoUpDownでアップされる、それをDBへ書き込む

■引き継ぎ　開発環境などどうするか
引き継ぎまとめというファイルにまとめてある
本番の環境は、踏み台サーバにアクセスする必要がある（リモートデスクトップで）
この時にVPNでTSEからアクセスする必要がある、ユーザーを作ってもらう必要がある？

鹿島のAWSのWindows?
54.250.13.167
ここからさらにリモートで接続する
es2なんたら

開発環境
10.36.14.7

開発の際は
webAPIを起動してDBとのやりとりをさせて
各種ツールをデバッグするのが良い
DBのアクセスはWebAPIがほとんど行っている
S3上にtunneldb-tse-debugなんたらという名前がついたDBがある
DB接続情報は本番環境のA5M2かソースのapp.config？に書いてある

■S3
ログインIDPWがサーバのマニュアルに書いてあるものだとできない

運用はいろんなところにはいっている
石川にあるトンネル

今後、大規模な改造があった場合はいろいろなツールを動かす必要がある
いろいろな改造があってSTEP6まで来ている

切羽の1日ごとのファイル（きりはかんさつぼ）

---
【トンネルDB】
■案件フォルダ
\\192.168.10.46\work\project\★鹿島_20200527_トンネルDBプロジェクト
■引き継ぎ資料
\\192.168.10.46\work\project\★鹿島_20200527_トンネルDBプロジェクト\99_引き継ぎ用
■AWS管理コンソールログイン
https://935525147879.signin.aws.amazon.com/console
uzawa@estrella.co.jp
zfHhCbtwT6c'


